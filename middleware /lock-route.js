// middleware/checkAuth.js

export default async (to, from, next) => {
  try {
    // Выполняйте запрос на сервер, чтобы проверить статус
    const response = await yourApiCallToCheckAuth(); // Замените на ваш запрос

    if (response.status === 401) {
      // Если статус 401, то пользователь не аутентифицирован
      // Здесь вы можете выполнить необходимые действия, например, перенаправление на страницу входа
      next('/login');
    } else {
      // Если статус не 401, то продолжаем выполнение маршрута
      next();
    }
  } catch (error) {
    // Обработка ошибок при выполнении запроса (например, сетевые ошибки)
    console.error(error);
    next('/error'); // Можно перенаправить на страницу с ошибкой
  }
};